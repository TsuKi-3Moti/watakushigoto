<div class="container px-5 px-sm-0">
  <div class="row">
    <!--エラー文-->
    <%#= render "layouts/errors", obj: @question %>

    <div class="col-md-3">

      <!--ユーザー情報-->
      <%= render "info", user: @user %>

      <!--questionの新規投稿フォーム-->
      <%= render "public/questions/form", question: @question %>

    </div>

    <div class="col-md-8 offset-md-1">
      <h2 class="row border-bottom pb-3"><%= @user.name %>さんの Favorite </h2>
      <span>(全<%= @favorited_answers.count %>件)</span>

      <% if @favorited_answers.present? %>

        <ol class="list-group list-group-flush">
          <% @favorited_answers.each_with_index do |answer, i| %>
            <li class="list-group-item mt-3">

              <!--アンサー番号-->
              <div class="h4">
                <%= i + 1 %>.
              </div>

              <!--アンサー本文-->
              <div>
                <%= safe_join(answer.opinion.split("\n"),tag(:br)) %>
              </div>

              <!--アンサーについているタグ-->
              <div class="mt-3">
                <% answer.tags.each do |tag| %>
                  <%= link_to answers_path(name: tag.name), class: "btn btn-sm btn-outline-info rounded-pill" do %>
                    <i class="fa-solid fa-tag"></i><%= tag.name %>
                  <% end %>
                <% end %>
              </div>

              <div class="d-flex align-items-end">

                <!--アンサーした日時-->
                <span class="mr-3">
                  <%= l(answer.updated_at, format: :long) %>
                  <%= time_ago_in_words(answer.updated_at, format: :distance_in_words)%>前
                </span>

                <!--アンサーの削除ボタン-->
                <% if answer.question.user == current_user %>
                  <span class="ml-auto">
                    <%= link_to "Edit", edit_question_answer_path(answer.question, answer), class: "btn btn-sm btn-outline-success" %>
                    <%= link_to "Destroy", question_answer_path(answer.question, answer), method: :delete, remote: false,
                    data: { confirm: "この Answer を削除しますか？" }, class: "btn btn-sm btn-outline-danger" %>
                  </span>
                <% end %>

              </div>

              <!--アンサーのいいね数-->
              <div id="answer_<%= answer.id %>" class="my-3">
                <%= render "public/favorites/favorite-btn", answer: answer %>
              </div>

            </li>
          <% end %>
        </ol>

      <% else %>

        <div class="h4 text-center">
          Favorite した Answer はまだないようです。
        </div>

      <% end %>
    </div>

  </div>
</div>